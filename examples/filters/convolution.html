<!DOCTYPE html>
<html>
<head>

<meta charset=utf-8 />
<style type="text/css">
.text {
	font-family: "Arial";
	font-size: 22px;
	color: #00AEEF;
	padding:20px;
}
</style>

<title>Convolution Example</title>

<script src="../../dist/Breakout.js"></script>
<script src="../libs/jquery-1.7.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {

	// to do: plot data to a scope-like graph

	// dependencies
	// declare these variables so you don't have
	// to type the full namespace
	var Event = JSUTILS.Event;

	var IOBoard = BO.IOBoard;
	var IOBoardEvent = BO.IOBoardEvent;
	var Convolution = BO.filters.Convolution;

	var arduino = new IOBoard("localhost", 8887);
	
	arduino.addEventListener(IOBoardEvent.READY, onReady);

	function onReady(event) {
					
		arduino.removeEventListener(IOBoardEvent.READY, onReady);		

		// need to enable an analog pin in order to read it
		arduino.enableAnalogPin(0);
		var pot = arduino.getAnalogPin(0);
		pot.addFilter(new Convolution(Convolution.MOVING_AVERAGE))
		pot.addEventListener(Event.CHANGE, onPotChange);
				
	}
	
	function onPotChange(event) {
		var pin = event.target;
		var analogData = "pot value: " + pin.value.toFixed(3) + 
			"\tmin = " + pin.minimum.toFixed(3) + "\tmax = " + 
			pin.maximum.toFixed(3) + "\tavg = " + pin.average.toFixed(3)
		
		$('#potData').html(analogData);	
		$('#preFilterData').html("pre-filter value: " + pin.preFilterValue.toFixed(3));
	}
			
});
</script>

</head>
<body>
  
	<div id="potData" class="text">pot value:</div>
	<div id="preFilterData" class="text">pre-filter value:</div>
  
</body>
</html>â€‹