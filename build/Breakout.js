'use strict';var BREAKOUT=BREAKOUT||{};BREAKOUT.namespace=function(a){var a=a.split("."),c=BREAKOUT,f;"BREAKOUT"===a[0]&&(a=a.slice(1));for(f=0;f<a.length;f+=1)"undefined"===typeof c[a[f]]&&(c[a[f]]={}),c=c[a[f]];return c};BREAKOUT.inherit=function(a){function c(){}if(null==a)throw TypeError();if(Object.create)return Object.create(a);var f=typeof a;if("object"!==f&&"function"!==f)throw TypeError();c.prototype=a;return new c};
if(!Function.prototype.bind)Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),f=this,b=function(){},d=function(){return f.apply(this instanceof b?this:a||window,c.concat(Array.prototype.slice.call(arguments)))};b.prototype=this.prototype;d.prototype=new b;return d};BREAKOUT.namespace("BREAKOUT.Event");BREAKOUT.Event=function(){var a;a=function(a){this.type=a;this.target=null;this.name="Event"};a.CONNECTED="connected";a.CHANGE="change";a.COMPLETE="complete";return a}();BREAKOUT.namespace("BREAKOUT.EventDispatcher");
BREAKOUT.EventDispatcher=function(){var a;a=function(a){this._target=a||null;this._eventListeners={};this.name="EventDispatcher"};a.prototype={addEventListener:function(a,f){this._eventListeners[a]||(this._eventListeners[a]=[]);this._eventListeners[a].push(f)},removeEventListener:function(a,f){for(var b=0,d=this._eventListeners[a].length;b<d;b++)this._eventListeners[a][b]==f&&this._eventListeners[a].splice(b,1)},hasEventListener:function(a){return this._eventListeners[a]?!0:!1},dispatchEvent:function(a,
f){a.target=this._target;var b=!1,d;for(d in f)a[d.toString()]=f[d];if(this.hasEventListener(a.type)){d=0;for(var e=this._eventListeners[a.type].length;d<e;d++)try{this._eventListeners[a.type][d].call(this,a),b=!0}catch(n){}}return b}};return a}();BREAKOUT.namespace("BREAKOUT.IOBoardEvent");
BREAKOUT.IOBoardEvent=function(){var a,c=BREAKOUT.Event;a=function(a){this.name="IOBoardEvent";c.call(this,a)};a.ANALOG_DATA="analodData";a.DIGITAL_DATA="digitalData";a.FIRMWARE_VERSION="firmwareVersion";a.FIRMWARE_NAME="firmwareName";a.STRING_MESSAGE="stringMessage";a.SYSEX_MESSAGE="sysexMessage";a.CAPABILITY_RESPONSE="capabilityResponse";a.PIN_STATE_RESPONSE="pinStateResponse";a.ANALOG_MAPPING_RESPONSE="analogMappingResponse";a.READY="arduinoReady";a.prototype=BREAKOUT.inherit(c.prototype);return a.prototype.constructor=
a}();BREAKOUT.namespace("BREAKOUT.WSocketEvent");BREAKOUT.WSocketEvent=function(){var a,c=BREAKOUT.Event;a=function(a){this.name="WSocketEvent";c.call(this,a)};a.CONNECTED="webSocketConnected";a.MESSAGE="webSocketMessage";a.CLOSE="webSocketClosed";a.prototype=BREAKOUT.inherit(c.prototype);return a.prototype.constructor=a}();BREAKOUT.namespace("BREAKOUT.WSocketWrapper");
BREAKOUT.WSocketWrapper=function(){var a,c=BREAKOUT.EventDispatcher,f=BREAKOUT.WSocketEvent;a=function(a,f,e,n){this.name="WSocketWrapper";c.call(this,this);this._host=a;this._port=f;this._protocol=n||"default-protocol";this._useSocketIO=e||!1;this._socket=null;this._readyState="";this.init(this)};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.init=function(a){if(a._useSocketIO){a._socket=io.connect("http://"+a._host+":"+a._port);try{a._socket.on("connect",function(){a.dispatchEvent(new f(f.CONNECTED));
a._socket.on("message",function(d){a.dispatchEvent(new f(f.MESSAGE),{message:d})})})}catch(d){console.log("Error "+d)}}else try{if("MozWebSocket"in window)a._socket=new MozWebSocket("ws://"+a._host+":"+a._port,a._protocol);else if("WebSocket"in window)a._socket=new WebSocket("ws://"+a._host+":"+a._port);else throw console.log("Websockets not supported by this browser"),"Websockets not supported by this browser";console.log("Starting up...");a._socket.onopen=function(){a.dispatchEvent(new f(f.CONNECTED));
a._socket.onmessage=function(d){a.dispatchEvent(new f(f.MESSAGE),{message:d.data})};a._socket.onclose=function(){a._readyState=a._socket.readyState;a.dispatchEvent(new f(f.CLOSE))}}}catch(e){console.log("Error "+e)}};a.prototype.send=function(a){this._socket.send(a)};a.prototype.__defineGetter__("readyState",function(){return this._readyState});return a}();BREAKOUT.namespace("BREAKOUT.filters.FilterBase");BREAKOUT.filters.FilterBase=function(){var a;a=function(){throw Error("Can't instantiate abstract classes");};a.prototype.processSample=function(){throw Error("Filter objects must implement the method processSample");};return a}();BREAKOUT.namespace("BREAKOUT.filters.Scaler");
BREAKOUT.filters.Scaler=function(){var a,c=BREAKOUT.filters.FilterBase;a=function(a,b,d,e,c,i){this.name="Scaler";this._inMin=a||0;this._inMax=b||1;this._outMin=d||0;this._outMax=e||1;this._type=c||this.LINEAR;this._limiter=i||!0};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.processSample=function(a){var b=this._outMax-this._outMin,a=(a-this._inMin)/(this._inMax-this._inMin);this._limiter&&(a=Math.max(0,Math.min(1,a)));return b*this._type(a)+this._outMin};a.prototype.LINEAR=
function(a){return a};a.prototype.SQUARE=function(a){return a};a.prototype.SQUARE_ROOT=function(a){return a};a.prototype.CUBE=function(a){return a};a.prototype.CUBE_ROOT=function(a){return a};return a}();BREAKOUT.namespace("BREAKOUT.filters.Convolution");
BREAKOUT.filters.Convolution=function(){var a,c=BREAKOUT.filters.FilterBase;a=function(a){this.name="Convolution";this._buffer=[];this.coef=a};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.__defineGetter__("coef",function(){return this._coef});a.prototype.__defineSetter__("coef",function(a){this._coef=a;this._buffer=Array(this._coef.length);for(var a=this._buffer.length,b=0;b<a;b++)this._buffer[b]=0});a.prototype.processSample=function(a){this._buffer.unshift(a);
this._buffer.pop();for(var a=0,b=this._buffer.length,d=0;d<b;d++)a+=this._coef[d]*this._buffer[d];return a};a.LPF=[1/3,1/3,1/3];a.HPF=[1/3,-2/3,1/3];a.MOVING_AVERAGE=[0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125];return a}();BREAKOUT.namespace("BREAKOUT.filters.TriggerPoint");
BREAKOUT.filters.TriggerPoint=function(){var a,c=BREAKOUT.filters.FilterBase;a=function(a){this.name="TriggerPoint";this._points={};this._range=[];void 0===a&&(a=[[0.5,0]]);if(a[0]instanceof Array)for(var b=a.length,d=0;d<b;d++)this._points[a[d][0]]=a[d][1];else"number"===typeof a[0]&&(this._points[a[0]]=a[1]);this.updateRange();this._lastStatus=0};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.processSample=function(a){for(var b=this._lastStatus,d=this._range.length,
e=0;e<d;e++){var c=this._range[e];if(c[0]<=a&&a<=c[1]){b=e;break}}return this._lastStatus=b};a.prototype.addPoint=function(a,b){this._points[a]=b;this.updateRange()};a.prototype.removePoint=function(a){delete this._points[a];this.updateRange()};a.prototype.removeAllPoints=function(){this._points={};this.updateRange()};a.prototype.updateRange=function(){this._range=[];var a=this.getKeys(this._points),b=a[0];this._range.push([Number.NEGATIVE_INFINITY,b-this._points[b]]);for(var b=a.length-1,d=0;d<b;d++){var e=
a[d],c=a[d+1],e=1*e+this._points[e],c=c-this._points[c];if(e>=c)throw Error("The specified range overlaps...");this._range.push([e,c])}a=a[a.length-1];this._range.push([1*a+this._points[a],Number.POSITIVE_INFINITY])};a.prototype.getKeys=function(a){var b=[],d;for(d in a)b.push(d);return b.sort()};return a}();BREAKOUT.namespace("BREAKOUT.generators.GeneratorEvent");BREAKOUT.generators.GeneratorEvent=function(){var a,c=BREAKOUT.Event;a=function(a){c.call(this,a);this.name="GeneratorEvent"};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.UPDATE="update";return a}();BREAKOUT.namespace("BREAKOUT.generators.GeneratorBase");
BREAKOUT.generators.GeneratorBase=function(){var a,c=BREAKOUT.EventDispatcher;a=function(){c.call(this,this);this.name="GeneratorBase"};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.__defineGetter__("value",function(){return this._value});a.prototype.__defineSetter__("value",function(a){this._value=a});return a}();BREAKOUT.namespace("BREAKOUT.generators.Oscillator");
BREAKOUT.generators.Oscillator=function(){var a,c=BREAKOUT.generators.GeneratorBase,f=BREAKOUT.generators.GeneratorEvent;a=function(b,d,e,f,i,j){c.call(this);this._wave=b||a.SINE;this._freq=d||1;this._amplitude=e||1;this._offset=f||0;this._phase=i||0;this._times=j||0;if(0===d)throw Error("Frequency should be larger than 0");this._timer=null;this._delay=33;this.reset()};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.__defineSetter__("serviceInterval",function(a){this._delay=
a;null!==this._timer&&this.start()});a.prototype.__defineGetter__("serviceInterval",function(){return this._delay});a.prototype.start=function(){null!==this._timer&&this.stop();this._timer=setInterval(this.autoUpdate.bind(this),this._delay);this._startTime=(new Date).getTime();this.autoUpdate(null)};a.prototype.stop=function(){clearInterval(this._timer);this._timer=null};a.prototype.reset=function(){this._time=0;this._lastVal=0.999};a.prototype.update=function(a){a=a||-1;this._time=0>a?this._time+
this._delay:this._time+a;this.computeValue()};a.prototype.autoUpdate=function(){this._time=(new Date).getTime()-this._startTime;this.computeValue()};a.prototype.computeValue=function(){var b=this._time/1E3;0!==this._times&&this._freq*b>=this._times?(this.stop(),this._value=this._wave!==a.LINEAR?this._offset:this._amplitude*this._wave(1,0)+this._offset):(b=this._freq*(b+this._phase),this._value=this._amplitude*this._wave(b,this._lastVal)+this._offset,this._lastVal=b);this.dispatchEvent(new f(f.UPDATE))};
a.SINE=function(a){return 0.5*(1+Math.sin(2*Math.PI*(a-0.25)))};a.SQUARE=function(a){return 0.5>=a%1?1:0};a.TRIANGLE=function(a){a%=1;return 0.5>=a?2*a:2-2*a};a.SAW=function(a){a%=1;return 0.5>=a?a+0.5:a-0.5};a.IMPULSE=function(a,d){return a%1<d%1?1:0};a.LINEAR=function(a){return 1>a?a:1};return a}();BREAKOUT.namespace("BREAKOUT.Pin");
BREAKOUT.Pin=function(){var a,c=BREAKOUT.EventDispatcher,f=BREAKOUT.Event,b=BREAKOUT.generators.GeneratorEvent;a=function(a,e){this.name="Pin";this._type=e;this._number=a;this._analogNumber=void 0;this._maxPWMValue=255;this._lastValue=this._value=-1;this._average=0;this._minimum=Math.pow(2,16);this._numSamples=this._sum=this._maximum=0;this._generator=this._filters=null;this._evtDispatcher=new c(this)};a.prototype={setAnalogNumber:function(a){this._analogNumber=a},get analogNumber(){return this._analogNumber},
get number(){return this._number},setMaxPWMValue:function(){this._maxPWMValue=value},get maxPWMValue(){return this._maxPWMValue},get average(){return this._average},get minimum(){return this._minimum},get maximum(){return this._maximum},get value(){return this._value},set value(a){this.calculateMinMaxAndMean(a);this._lastValue=this._value;this._preFilterValue=a;this._value=this.applyFilters(a);this.detectChange(this._lastValue,this._value)},get lastValue(){return this._lastValue},get preFilterValue(){return this._preFilterValue},
get filters(){return this._filters},set filters(a){this._filters=a},get generator(){return this._generator},getType:function(){return this._type},setType:function(d){if(0<=d&&d<a.TOTAL_PIN_MODES)this._type=d},getCapabilities:function(){return this._capabilities},setCapabilities:function(a){this._capabilities=a},detectChange:function(a,e){a!==e&&this.dispatchEvent(new f(f.CHANGE))},clearWeight:function(){this._sum=this._average;this._numSamples=1},calculateMinMaxAndMean:function(a){var e=Number.MAX_VALUE;
this._minimum=Math.min(a,this._minimum);this._maximum=Math.max(a,this._maximum);this._sum+=a;this._average=this._sum/++this._numSamples;this._numSamples>=e&&this.clearWeight()},clear:function(){this._minimum=this._maximum=this._average=this._lastValue=this._preFilterValue;this.clearWeight()},addFilter:function(a){if(null!==a){if(null===this._filters)this._filters=[];this._filters.push(a)}},addGenerator:function(a){this.removeGenerator();this._generator=a;this._generator.addEventListener(b.UPDATE,
this.autoSetValue.bind(this))},removeGenerator:function(){null!==this._generator&&this._generator.removeEventListener(b.UPDATE,this.autoSetValue);this._generator=null},setFilters:function(a){this.filters=a},removeAllFilters:function(){this._filters=null},autoSetValue:function(){this.value=this._generator.value},applyFilters:function(a){if(null===this._filters)return a;for(var e=this._filters.length,b=0;b<e;b++)a=this._filters[b].processSample(a);return a},addEventListener:function(a,e){this._evtDispatcher.addEventListener(a,
e)},removeEventListener:function(a,e){this._evtDispatcher.removeEventListener(a,e)},hasEventListener:function(a){return this._evtDispatcher.hasEventListener(a)},dispatchEvent:function(a,e){return this._evtDispatcher.dispatchEvent(a,e)}};a.HIGH=1;a.LOW=0;a.ON=1;a.OFF=0;a.DIN=0;a.DOUT=1;a.AIN=2;a.AOUT=3;a.PWM=3;a.SERVO=4;a.SHIFT=5;a.I2C=6;a.TOTAL_PIN_MODES=7;return a}();BREAKOUT.namespace("BREAKOUT.I2CBase");
BREAKOUT.I2CBase=function(){var a,c=BREAKOUT.Pin,f=BREAKOUT.EventDispatcher,b=BREAKOUT.IOBoardEvent;a=function(d,e,n){if(void 0!=d){this.name="I2CDevice";this.board=d;var i=n||0,n=i&255,i=i>>8&255;this._address=e;this._evtDispatcher=new f(this);e=d.getI2cPins();2==e.length?(d.getPin(e[0]).getType()!=c.I2C&&(d.getPin(e[0]).setType(c.I2C),d.getPin(e[1]).setType(c.I2C)),d.addEventListener(b.SYSEX_MESSAGE,this.onSysExMessage.bind(this)),d.sendSysex(a.I2C_CONFIG,[n,i])):console.log("Error, this board does not support i2c")}};
a.prototype={get address(){return this._address},onSysExMessage:function(b){var b=b.message,e=this.board.getValueFromTwo7bitBytes(b[1],b[2]),f=[];if(b[0]==a.I2C_REPLY&&e==this._address){for(var e=3,c=b.length;e<c;e+=2)f.push(this.board.getValueFromTwo7bitBytes(b[e],b[e+1]));this.handleI2C(f)}},sendI2CRequest:function(b){var e=[],f=b[0];e[0]=b[1];e[1]=f<<3;for(var f=2,c=b.length;f<c;f++)e.push(b[f]&127),e.push(b[f]>>7&127);this.board.sendSysex(a.I2C_REQUEST,e)},update:function(){},handleI2C:function(){},
addEventListener:function(a,b){this._evtDispatcher.addEventListener(a,b)},removeEventListener:function(a,b){this._evtDispatcher.removeEventListener(a,b)},hasEventListener:function(a){return this._evtDispatcher.hasEventListener(a)},dispatchEvent:function(a,b){return this._evtDispatcher.dispatchEvent(a,b)}};a.I2C_REQUEST=118;a.I2C_REPLY=119;a.I2C_CONFIG=120;a.WRITE=0;a.READ=1;a.READ_CONTINUOUS=2;a.STOP_READING=3;return a}();BREAKOUT.namespace("BREAKOUT.io.BlinkM");
BREAKOUT.io.BlinkM=function(){var a,c=BREAKOUT.I2CBase;a=function(a,b){this.name="BlinkM";c.call(this,a,b||9)};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.goToRGBColorNow=function(a){this.sendI2CRequest([c.WRITE,this.address,110,a[0],a[1],a[2]])};a.prototype.fadeToRGBColor=function(a,b){b=b||-1;0<=b&&this.sendI2CRequest([c.WRITE,this.address,102,b]);this.sendI2CRequest([c.WRITE,this.address,99,a[0],a[1],a[2]])};a.prototype.fadeToRandomRGBColor=function(a,b){b=b||
-1;0<=b&&this.sendI2CRequest([c.WRITE,this.address,102,b]);this.sendI2CRequest([c.WRITE,this.address,67,a[0],a[1],a[2]])};a.prototype.fadeToHSBColor=function(a,b){b=b||-1;0<=b&&this.sendI2CRequest([c.WRITE,this.address,102,b]);this.sendI2CRequest([c.WRITE,this.address,104,a[0],a[1],a[2]])};a.prototype.fadeToRandomHSBColor=function(a,b){b=b||-1;0<=b&&this.sendI2CRequest([c.WRITE,this.address,102,b]);this.sendI2CRequest([c.WRITE,this.address,72,a[0],a[1],a[2]])};a.prototype.setFadeSpeed=function(a){this.sendI2CRequest([c.WRITE,
this.address,102,a])};a.prototype.playLightScript=function(a,b,d){this.sendI2CRequest([c.WRITE,this.address,112,a,b||1,d])};a.prototype.stopScript=function(){this.sendI2CRequest([c.WRITE,this.address,111])};a.prototype.handleI2C=function(a){console.log("BlinkM: "+a)};return a}();BREAKOUT.namespace("BREAKOUT.io.CompassHMC6352");
BREAKOUT.io.CompassHMC6352=function(){var a,c=BREAKOUT.I2CBase,f=BREAKOUT.Event;a=function(a,d){this._lastHeading=this._heading=0;this.name="CompassHMC6352";c.call(this,a,d||33);this.sendI2CRequest([c.WRITE,this.address,71,116,81]);this.sendI2CRequest([c.WRITE,this.address,65]);this.startReading()};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.__defineGetter__("heading",function(){return this._heading});a.prototype.handleI2C=function(a){this._heading=Math.floor((a[1]<<
8|a[2])/10);this._heading!=this._lastHeading&&this.dispatchEvent(new f(f.CHANGE));this._lastHeading=this._heading};a.prototype.startReading=function(){this.sendI2CRequest([c.READ_CONTINUOUS,this.address,127,2])};a.prototype.stopReading=function(){this.sendI2CRequest([c.STOP_READING,this.address])};return a}();BREAKOUT.namespace("BREAKOUT.PhysicalInputBase");
BREAKOUT.PhysicalInputBase=function(){var a,c=BREAKOUT.EventDispatcher;a=function(){this.name="PhysicalInputBase";this._evtDispatcher=new c(this)};a.prototype={addEventListener:function(a,b){this._evtDispatcher.addEventListener(a,b)},removeEventListener:function(a,b){this._evtDispatcher.removeEventListener(a,b)},hasEventListener:function(a){return this._evtDispatcher.hasEventListener(a)},dispatchEvent:function(a,b){return this._evtDispatcher.dispatchEvent(a,b)}};return a}();BREAKOUT.namespace("BREAKOUT.io.ButtonEvent");BREAKOUT.io.ButtonEvent=function(){var a,c=BREAKOUT.Event;a=function(a){this.name="ButtonEvent";c.call(this,a)};a.PRESS="pressed";a.RELEASE="released";a.LONG_PRESS="longPress";a.SUSTAINED_PRESS="sustainedPress";a.prototype=BREAKOUT.inherit(c.prototype);return a.prototype.constructor=a}();BREAKOUT.namespace("BREAKOUT.io.Button");
BREAKOUT.io.Button=function(){var a,c=BREAKOUT.PhysicalInputBase,f=BREAKOUT.Event,b=BREAKOUT.Pin,d=BREAKOUT.io.ButtonEvent;a=function(e,d,i,j){c.call(this);this.name="Button";this._pin=d;d=d.number;this.buttonMode=i||a.PULL_DOWN;this._sustainedPressInterval=j||1E3;this._debounceInterval=20;this._repeatCount=0;this._timer=null;this._timeout=null;this._board=e;e.setDigitalPinMode(d,b.DIN);if(this.buttonMode===a.INTERNAL_PULL_UP)e.enablePullUp(d),this._pin.value=b.HIGH;this._pin.addEventListener(f.CHANGE,
this.onPinChange.bind(this))};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.onPinChange=function(b){var b=b.target.value,d;if(this.buttonMode===a.PULL_DOWN)d=1===b?this.pressed:this.released;else if(this.buttonMode===a.PULL_UP||this.buttonMode===a.INTERNAL_PULL_UP)d=1===b?this.released:this.pressed;null!==this._timeout&&clearTimeout(this._timeout);this._timeout=setTimeout(d.bind(this),this._debounceInterval)};a.prototype.pressed=function(){this._timeout=null;this.dispatchEvent(new d(d.PRESS));
this._timer=setInterval(this.sustainedPress.bind(this),this._sustainedPressInterval)};a.prototype.released=function(){this._timeout=null;this.dispatchEvent(new d(d.RELEASE));if(null!=this._timer)clearInterval(this._timer),this._timer=null;this._repeatCount=0};a.prototype.sustainedPress=function(){0<this._repeatCount?this.dispatchEvent(new d(d.SUSTAINED_PRESS)):this.dispatchEvent(new d(d.LONG_PRESS));this._repeatCount++};a.prototype.__defineGetter__("debounceInterval",function(){return this._debounceInterval});
a.prototype.__defineSetter__("debounceInterval",function(a){this._debounceInterval=a});a.prototype.__defineGetter__("sustainedPressInterval",function(){return this._sustainedPressInterval});a.prototype.__defineSetter__("sustainedPressInterval",function(a){this._sustainedPressInterval=a});a.prototype.__defineGetter__("pinNumber",function(){return this._pin.number});a.PULL_DOWN=0;a.PULL_UP=1;a.INTERNAL_PULL_UP=2;return a}();BREAKOUT.namespace("BREAKOUT.io.Potentiometer");
BREAKOUT.io.Potentiometer=function(){var a,c=BREAKOUT.PhysicalInputBase,f=BREAKOUT.filters.Scaler,b=BREAKOUT.filters.Convolution,d=BREAKOUT.Event;a=function(a,f,i){c.call(this);this.name="Potentiometer";this._pin=f;i=i||!1;a.enableAnalogPin(this._pin.analogNumber);i&&this._pin.addFilter(new b(b.MOVING_AVERAGE));this._pin.addEventListener(d.CHANGE,this.onPinChange.bind(this))};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.__defineGetter__("value",function(){return this._pin.value});
a.prototype.__defineGetter__("average",function(){return this._pin.average});a.prototype.__defineGetter__("preFilterValue",function(){return this._pin.preFilterValue});a.prototype.__defineGetter__("minimum",function(){return this._pin.minimum});a.prototype.__defineGetter__("maximum",function(){return this._pin.maximum});a.prototype.clear=function(){this._pin.clear()};a.prototype.setRange=function(a,b){this._pin.addFilter(new f(0,1,a||0,b||1,f.LINEAR))};a.prototype.onPinChange=function(){this.dispatchEvent(new d(d.CHANGE))};
return a}();BREAKOUT.namespace("BREAKOUT.io.AnalogAccelerometer");
BREAKOUT.io.AnalogAccelerometer=function(){var a,c=BREAKOUT.PhysicalInputBase,f=BREAKOUT.Event,b=BREAKOUT.filters.Scaler,d=BREAKOUT.filters.Convolution;a=function(a,b,d,j,A,m){c.call(this);this.name="AnalogAccelerometer";a.enableAnalogPin(b.analogNumber);a.enableAnalogPin(d.analogNumber);a.enableAnalogPin(j.analogNumber);this._enableSmoothing=m||!1;this._xPin=b||null;this._yPin=d||null;this._zPin=j||null;this._dynamicRange=A||1;this._z=this._y=this._x=0;null!==this._xPin&&this._xPin.addEventListener(f.CHANGE,
this.xAxisChanged.bind(this));null!==this._yPin&&this._yPin.addEventListener(f.CHANGE,this.yAxisChanged.bind(this));null!==this._zPin&&this._zPin.addEventListener(f.CHANGE,this.zAxisChanged.bind(this))};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=a;a.prototype.__defineGetter__("dynamicRange",function(){return this._dynamicRange});a.prototype.__defineGetter__("x",function(){return this._x});a.prototype.__defineGetter__("y",function(){return this._y});a.prototype.__defineGetter__("z",
function(){return this._z});a.prototype.__defineGetter__("xPin",function(){return this._xPin});a.prototype.__defineGetter__("yPin",function(){return this._yPin});a.prototype.__defineGetter__("zPin",function(){return this._zPin});a.prototype.__defineGetter__("rotationX",function(){var a=Math.min(Math.max(this._x,-1),1);return 180*(Math.asin(a)/Math.PI)});a.prototype.__defineGetter__("rotationY",function(){var a=Math.min(Math.max(this._y,-1),1);return 180*(Math.asin(a)/Math.PI)});a.prototype.__defineGetter__("rotationZ",
function(){var a=Math.min(Math.max(this._z,-1),1);return 180*(Math.asin(a)/Math.PI)});a.prototype.setRangeFor=function(e,c,f){var j=this._dynamicRange;if(e===a.X_AXIS){if(null!==this._xPin)this._xPin.filters=[new b(c,f,-j,j,b.LINEAR)],this._enableSmoothing&&this._xPin.addFilter(new d(d.MOVING_AVERAGE))}else if(e===a.Y_AXIS){if(null!==this._yPin)this._yPin.filters=[new b(c,f,-j,j,b.LINEAR)],this._enableSmoothing&&this._yPin.addFilter(new d(d.MOVING_AVERAGE))}else if(e===a.Z_AXIS&&null!==this._zPin)this._zPin.filters=
[new b(c,f,-j,j,b.LINEAR)],this._enableSmoothing&&this._zPin.addFilter(new d(d.MOVING_AVERAGE))};a.prototype.getCalibratedRange=function(a,b,d){var c={min:0,max:0},f=(b-a)/2,a=(a+b)/2;c.min=(a-f*this._dynamicRange)/d;c.max=(a+f*this._dynamicRange)/d;return c};a.prototype.xAxisChanged=function(a){this._x=a.target.value;this.dispatchEvent(new f(f.CHANGE))};a.prototype.yAxisChanged=function(a){this._y=a.target.value;this.dispatchEvent(new f(f.CHANGE))};a.prototype.zAxisChanged=function(a){this._z=a.target.value;
this.dispatchEvent(new f(f.CHANGE))};a.X_AXIS=0;a.Y_AXIS=1;a.Z_AXIS=2;return a}();BREAKOUT.namespace("BREAKOUT.io.AccelerometerADXL345");
BREAKOUT.io.AccelerometerADXL345=function(){var a,c=BREAKOUT.I2CBase,f=BREAKOUT.Event;a=function(b,d,e){e=e||a.DEVICE_ID;c.call(this,b,e);this.name="AccelerometerADXL345";this._dynamicRange=d||a.RANGE_2G;this._sensitivity={x:a.DEFAULT_SENSITIVITY,y:a.DEFAULT_SENSITIVITY,z:a.DEFAULT_SENSITIVITY};this._offset={x:0,y:0,z:0};this._isReading=!1;this._debugMode=!0;this._rawZ=this._rawY=this._rawX=this._z=this._y=this._x=0;this.powerOn();this.setRangeAndFullRes(this._dynamicRange)};a.prototype=BREAKOUT.inherit(c.prototype);
a.prototype.constructor=a;a.prototype.__defineGetter__("isRunning",function(){return this._isReading});a.prototype.__defineGetter__("sensitivityX",function(){return this._sensitivity.x});a.prototype.__defineSetter__("sensitivityX",function(a){this._sensitivity.x=a});a.prototype.__defineGetter__("sensitivityY",function(){return this._sensitivity.y});a.prototype.__defineSetter__("sensitivityY",function(a){this._sensitivity.y=a});a.prototype.__defineGetter__("sensitivityZ",function(){return this._sensitivity.z});
a.prototype.__defineSetter__("sensitivityZ",function(a){this._sensitivity.z=a});a.prototype.__defineGetter__("dynamicRange",function(){return this._dynamicRange});a.prototype.__defineGetter__("x",function(){return this._x});a.prototype.__defineGetter__("y",function(){return this._y});a.prototype.__defineGetter__("z",function(){return this._z});a.prototype.__defineGetter__("rawX",function(){return this._rawX});a.prototype.__defineGetter__("rawY",function(){return this._rawY});a.prototype.__defineGetter__("rawZ",
function(){return this._rawZ});a.prototype.setRangeAndFullRes=function(a){switch(a){case 2:a=0;break;case 4:a=1;break;case 8:a=2;break;case 16:a=3;break;default:a=0}this.sendI2CRequest([c.WRITE,this._address,49,a|8])};a.prototype.handleI2C=function(a){switch(a[0]){case 178:this.readAccel(a);break;case 30:this.debug("offset x = "+a[2]);break;case 31:this.debug("offset y = "+a[2]);break;case 32:this.debug("offset z = "+a[2])}};a.prototype.startReading=function(){if(!this._isReading)this._isReading=
!0,this.sendI2CRequest([c.READ_CONTINUOUS,this.address,178,6])};a.prototype.stopReading=function(){this._isReading=!1;this.sendI2CRequest([c.STOP_READING,this.address])};a.prototype.setAxisOffset=function(a,d,e){this._offset.x=a;this._offset.y=d;this._offset.z=e;this.sendI2CRequest([c.WRITE,this.address,30,a]);this.sendI2CRequest([c.WRITE,this.address,31,d]);this.sendI2CRequest([c.WRITE,this.address,32,e])};a.prototype.getAxisOffset=function(){this.sendI2CRequest([c.READ,this.address,30,1]);this.sendI2CRequest([c.READ,
this.address,31,1]);this.sendI2CRequest([I2cBase.READ,this.address,32,1]);return this._offset};a.prototype.update=function(){this._isReading&&this.stopReading();this.sendI2CRequest([c.READ,this.address,178,6])};a.prototype.powerOn=function(){this.sendI2CRequest([c.WRITE,this.address,45,0]);this.setRegisterBit(45,3,!0)};a.prototype.setRegisterBit=function(a,d,e){var f;this.sendI2CRequest([c.WRITE,this.address,a,e?f|1<<d:f&~(1<<d)])};a.prototype.readAccel=function(a){var d,c;if(7!=a.length)throw Error("Incorrect number of bytes returned");
d=a[2]<<8|a[1];c=a[4]<<8|a[3];a=a[6]<<8|a[5];this._rawX=d>>15?-1*((d^65535)+1):d;this._rawY=c>>15?-1*((c^65535)+1):c;this._rawZ=a>>15?-1*((a^65535)+1):a;this._x=this._rawX*this._sensitivity.x;this._y=this._rawY*this._sensitivity.y;this._z=this._rawZ*this._sensitivity.z;this.dispatchEvent(new f(f.CHANGE))};a.prototype.debug=function(a){this._debugMode&&console.log(a)};a.RANGE_2G=2;a.RANGE_4G=4;a.RANGE_8G=8;a.RANGE_16G=16;a.DEVICE_ID=83;a.DEFAULT_SENSITIVITY=0.00390625;return a}();BREAKOUT.namespace("BREAKOUT.io.GyroEvent");BREAKOUT.io.GyroEvent=function(){var a,c=BREAKOUT.Event;a=function(a){c.call(this,a);this.name="GyroEvent"};a.GYRO_READY="gyroReady";a.prototype=BREAKOUT.inherit(c.prototype);return a.prototype.constructor=a}();BREAKOUT.namespace("BREAKOUT.io.GyroITG3200");
BREAKOUT.io.GyroITG3200=function(){var a,c=BREAKOUT.I2CBase,f=BREAKOUT.Event,b=BREAKOUT.io.GyroEvent;a=function(b,e,f){f=f||a.DEVICE_ID;void 0===e&&(e=!0);c.call(this,b,f);this.name="GyroITG3200";this._autoStart=e;this._isReading=!1;this._tempOffsets={};this._startupTimer=null;this._debugMode=!0;this._z=this._y=this._x=0;this._gains={x:1,y:1,z:1};this._offsets={x:0,y:0,z:0};this._polarities={x:0,y:0,z:0};this.setRevPolarity(!1,!1,!1);this.init()};a.prototype=BREAKOUT.inherit(c.prototype);a.prototype.constructor=
a;a.prototype.__defineGetter__("isRunning",function(){return this._isReading});a.prototype.__defineGetter__("x",function(){return this._x/14.375*this._polarities.x*this._gains.x+this._offsets.x});a.prototype.__defineGetter__("y",function(){return this._y/14.375*this._polarities.y*this._gains.y+this._offsets.y});a.prototype.__defineGetter__("z",function(){return this._z/14.375*this._polarities.z*this._gains.z+this._offsets.z});a.prototype.__defineGetter__("rawX",function(){return this._rawX});a.prototype.__defineGetter__("rawY",
function(){return this._rawY});a.prototype.__defineGetter__("rawZ",function(){return this._rawZ});a.prototype.setRevPolarity=function(a,b,c){this._polarities.x=a?-1:1;this._polarities.y=b?-1:1;this._polarities.z=c?-1:1};a.prototype.setOffsets=function(a,b,c){this._offsets.x=a;this._offsets.y=b;this._offsets.z=c};a.prototype.setGains=function(a,b,c){this._gains.x=a;this._gains.y=b;this._gains.z=c};a.prototype.startReading=function(){if(!this._isReading)this._isReading=!0,this.sendI2CRequest([c.READ_CONTINUOUS,
this.address,29,6])};a.prototype.stopReading=function(){this._isReading=!1;this.sendI2CRequest([c.STOP_READING,this.address])};a.prototype.update=function(){this._isReading&&this.stopReading();this.sendI2CRequest([c.READ,this.address,29,6])};a.prototype.init=function(){this.sendI2CRequest([c.WRITE,this.address,21,0]);this.sendI2CRequest([c.WRITE,this.address,22,24]);this.sendI2CRequest([c.WRITE,this.address,62,0]);this.sendI2CRequest([c.WRITE,this.address,23,5]);this._startupTimer=setTimeout(this.onGyroReady.bind(this),
70)};a.prototype.onGyroReady=function(){this._startupTimer=null;this.dispatchEvent(new b(b.GYRO_READY));this._autoStart&&this.startReading()};a.prototype.setRegisterBit=function(a,b,f){var i;this.sendI2CRequest([c.WRITE,this.address,a,f?i|1<<b:i&~(1<<b)])};a.prototype.handleI2C=function(a){switch(a[0]){case 29:this.readGyro(a);break;default:this.debug("Got unexpected register data")}};a.prototype.readGyro=function(a){var b,c;if(7!=a.length)throw Error("Incorrecte number of bytes returned");b=a[1]<<
8|a[2];c=a[3]<<8|a[4];a=a[5]<<8|a[6];this._x=b>>15?-1*((b^65535)+1):b;this._y=c>>15?-1*((c^65535)+1):c;this._z=a>>15?-1*((a^65535)+1):a;this.dispatchEvent(new f(f.CHANGE))};a.prototype.debug=function(a){this._debugMode&&console.log(a)};a.DEVICE_ID=105;return a}();BREAKOUT.namespace("BREAKOUT.io.Servo");BREAKOUT.io.Servo=function(){var a,c=BREAKOUT.Pin;a=function(a,b,c,e){this.name="Servo";this._pin=b;this._minAngle=c||0;this._maxAngle=e||180;a.sendServoAttach(b.number)};a.prototype={set angle(f){if(this._pin.getType()==c.SERVO)this._angle=f,this._pin.value=Math.max(0,Math.min(1,(this._angle-this._minAngle)/(this._maxAngle-this._minAngle)*a.COEF_TO_0_180))},get angle(){if(this._pin.getType()==c.SERVO)return this._angle}};a.COEF_TO_0_180=180/255;return a}();BREAKOUT.namespace("BREAKOUT.io.LED");
BREAKOUT.io.LED=function(){var a,c=BREAKOUT.Pin,f=BREAKOUT.generators.Oscillator;a=function(b,f,e){this.name="LED";this._driveMode=e||a.SOURCE_DRIVE;this._pin=f;this._onValue=1;this._offValue=0;if(this._driveMode===a.SOURCE_DRIVE)this._onValue=1,this._offValue=0;else if(this._driveMode===a.SYNC_DRIVE)this._onValue=0,this._offValue=1;else throw"driveMode should be LED.SOURCE_DRIVE or LED.SYNC_DRIVE";this._pin.getCapabilities()[c.PWM]?(b.setDigitalPinMode(this._pin.number,c.PWM),this._supportsPWM=!0):
(b.setDigitalPinMode(this._pin.number,c.DOUT),this._supportsPWM=!1)};a.prototype={get intensity(){return this._pin.value},set intensity(b){this._supportsPWM||(b=0.5>b?0:1);if(this._driveMode===a.SOURCE_DRIVE)this._pin.value=b;else if(this._driveMode===a.SYNC_DRIVE)this._pin.value=1-b},on:function(){this._pin.value=this._onValue},off:function(){this._pin.value=this._offValue},isOn:function(){return this._pin.value===this._onValue},toggle:function(){this._pin.value=1-this._pin.value},blink:function(a,
c,e){a=1E3/a;c=c||0;e=e||f.SQUARE;if(!this._supportsPWM&&e!==f.SQUARE)console.log("Warning: Only Oscillator.SQUARE may be used on a non-PWM pin."),console.log("Setting wave to Oscillator.SQUARE."),e=f.SQUARE;this._pin.addGenerator(new f(e,a,1,0,0,c));this._pin.generator.start()},stopBlinking:function(){null!==this._pin.generator&&this._pin.generator.stop();this.off()},fadeIn:function(a){this.fadeTo(1,a)},fadeOut:function(a){this.fadeTo(0,a)},fadeTo:function(a,c){if(this._supportsPWM){var e=1E3/(c||
1E3);this._pin.value!==a?(this._pin.addGenerator(new f(f.LINEAR,e,a-this._pin.value,this._pin.value,0,1)),this._pin.generator.start()):this._pin.removeGenerator()}else console.log("Warning: Fade methods can only be used for LEDs connected to PWM pins.")}};a.SOURCE_DRIVE=0;a.SYNC_DRIVE=1;return a}();BREAKOUT.namespace("BREAKOUT.io.RGBLED");
BREAKOUT.io.RGBLED=function(){var a,c=BREAKOUT.io.LED;a=function(f,b,d,e,n){this.name="RGBLED";if(void 0===n)n=a.COMMON_ANODE;this._redLED=new c(f,b,n);this._greenLED=new c(f,d,n);this._blueLED=new c(f,e,n)};a.prototype={setColor:function(a,c,d){this._redLED.intensity=a/255;this._greenLED.intensity=c/255;this._blueLED.intensity=d/255},fadeIn:function(a){a=a||1E3;this._redLED.fadeTo(1,a);this._greenLED.fadeTo(1,a);this._blueLED.fadeTo(1,a)},fadeOut:function(a){a=a||1E3;this._redLED.fadeTo(0,a);this._greenLED.fadeTo(0,
a);this._blueLED.fadeTo(0,a)},fadeTo:function(a,c,d,e){c/=255;d/=255;e=e||1E3;this._redLED.fadeTo(a/255,e);this._greenLED.fadeTo(c,e);this._blueLED.fadeTo(d,e)}};a.COMMON_ANODE=c.SYNC_DRIVE;a.COMMON_CATHODE=c.SOURCE_DRIVE;return a}();BREAKOUT.namespace("BREAKOUT.IOBoard");
BREAKOUT.IOBoard=function(){var a=224,c=240,f=247,b=111,d=107,e=BREAKOUT.Pin,n=BREAKOUT.EventDispatcher,i=BREAKOUT.Event,j=BREAKOUT.WSocketEvent,A=BREAKOUT.WSocketWrapper,m=BREAKOUT.IOBoardEvent;return function(N,x,E,O){function F(a){g.removeEventListener(m.FIRMWARE_VERSION,F);if(23<=10*a.version)g.send([c,d,f]);else throw Error("You must upload StandardFirmata version 2.3 or greater from Arduino version 1.0 or higher");}function P(){g.debug("debug: startup");g.dispatchEvent(new m(m.READY));g.enableDigitalPins()}
function G(a){a=a.substring(0,1);return a.charCodeAt(0)}function H(a){var c=a.target.getType(),b=a.target.number,a=a.target.value;switch(c){case e.DOUT:I(b,a);break;case e.AOUT:J(b,a);break;case e.SERVO:c=g.getDigitalPin(b),c.getType()==e.SERVO&&c.lastValue!=a&&J(b,a)}}function y(a){if(a.getType()==e.DOUT||a.getType()==e.AOUT||a.getType()==e.SERVO)a.hasEventListener(i.CHANGE)||a.addEventListener(i.CHANGE,H);else if(a.hasEventListener(i.CHANGE))try{a.removeEventListener(i.CHANGE,H)}catch(c){g.debug("debug: caught pin removeEventListener exception")}}
function J(d,e){var l=g.getDigitalPin(d).maxPWMValue,e=e*l,e=0>e?0:e,e=e>l?l:e;if(15<d||e>Math.pow(2,14)){var l=e,h=[];if(l>Math.pow(2,16))throw console.log("Extended Analog values > 16 bits are not currently supported by StandardFirmata"),"Extended Analog values > 16 bits are not currently supported by StandardFirmata";h[0]=c;h[1]=b;h[2]=d;h[3]=l&127;h[4]=l>>7&127;l>=Math.pow(2,14)&&(h[5]=l>>14&127);h.push(f);g.send(h)}else g.send([a|d&15,e&127,e>>7&127])}function I(a,c){var b=Math.floor(a/8);if(c==
e.HIGH)t[b]|=c<<a%8;else if(c==e.LOW)t[b]&=~(1<<a%8);else{console.log("Warning: Invalid value passed to sendDigital, value must be 0 or 1.");return}g.sendDigitalPort(b,t[b])}this.name="IOBoard";var g=this,o,B=0,C=0,s=[],p=[],q=0,t=[],u,D=[],K=[],L=[],r=[],v=0,M=19,w=0,z=new n(this);!E&&"number"===typeof x&&(x+="/websocket");o=new A(N,x,E,O);o.addEventListener(j.CONNECTED,function(){console.log("Socket Status: (open)");g.dispatchEvent(new i(i.CONNECTED));g.addEventListener(m.FIRMWARE_VERSION,F);g.reportVersion()});
o.addEventListener(j.MESSAGE,function(b){var b=b.message,b=1*b,d;if(0<q&&128>b){if(q--,s[q]=b,0==q)switch(B){case 144:var l=8*C;d=l+8;var b=s[1]|s[0]<<7,h={};d>=v&&(d=v);for(var k=0,i=l;i<d;i++){h=g.getDigitalPin(i);if(void 0==h)break;if(h.getType()==e.DIN&&(l=b>>k&1,l!=h.value))h.value=l,g.dispatchEvent(new m(m.DIGITAL_DATA),{pin:h});k++}break;case 249:w=s[1]+s[0]/10;g.dispatchEvent(new m(m.FIRMWARE_VERSION),{version:w});break;case a:d=g.getAnalogPin(C);if(void 0==d)break;d.value=g.getValueFromTwo7bitBytes(s[1],
s[0])/1023;d.value!=d.lastValue&&g.dispatchEvent(new m(m.ANALOG_DATA),{pin:d})}}else if(0>q)if(b==f){q=0;switch(p[0]){case 121:d=p;b="";for(k=3;k<d.length;k+=2)h=String.fromCharCode(d[k]),h+=String.fromCharCode(d[k+1]),b+=h;w=d[1]+d[2]/10;g.dispatchEvent(new m(m.FIRMWARE_NAME),{name:b,version:w});break;case 113:d=p;b="";for(k=1;k<d.length;k+=2)h=String.fromCharCode(d[k]),h+=String.fromCharCode(d[k+1]),b+=h.charAt(0);g.dispatchEvent(new m(m.STRING_MESSAGE),{message:b});break;case 108:for(var b=p,h=
{},k=1,l=d=0,i=b.length,j;k<=i;)if(127==b[k]){K[d]=d;j=void 0;if(h[e.DOUT])j=e.DOUT;if(h[e.AIN])j=e.AIN,D[l++]=d;j=new e(d,j);j.setCapabilities(h);y(j);r[d]=j;j.getCapabilities()[e.I2C]&&L.push(j.number);h={};d++;k++}else h[b[k]]=b[k+1],k+=2;u=Math.ceil(d/8);g.debug("debug: num ports = "+u);for(b=0;b<u;b++)t[b]=0;v=d;g.debug("debug: num pins = "+v);g.send([c,105,f]);break;case 110:b=p;h=b.length;k=b[1];l=b[2];i=r[k];4<h?d=g.getValueFromTwo7bitBytes(b[3],b[4]):3<h&&(d=b[3]);i.getType()!=l&&(i.setType(l),
y(i));if(i.value!=d)i.value=d;g.dispatchEvent(new m(m.PIN_STATE_RESPONSE),{pin:k,type:l,value:d});break;case 106:d=p;b=d.length;for(h=1;h<b;h++)127!=d[h]&&(D[d[h]]=h-1,g.getPin(h-1).setAnalogNumber(d[h]));g.debug("debug: system reset");g.send(255);setTimeout(P,500);g.debug("debug: configured");break;default:g.dispatchEvent(new m(m.SYSEX_MESSAGE),{message:p})}p=[]}else p.push(b);else switch(240>b?(d=b&240,C=b&15):d=b,d){case 249:case 144:case a:q=2;B=d;break;case c:q=-1,B=d}});o.addEventListener(j.CLOSE,
function(){console.log("Socket Status: "+o.readyState+" (Closed)")});this.__defineGetter__("samplingInterval",function(){return M});this.__defineSetter__("samplingInterval",function(a){10<=a&&100>=a?(M=a,g.send([c,122,a&127,a>>7&127,f])):console.log("Warning: Sampling interval must be between 10 and 100")});this.getValueFromTwo7bitBytes=function(a,b){return b<<7|a};this.getSocket=function(){return o};this.reportVersion=function(){g.send(249)};this.reportFirmware=function(){g.send([c,121,f])};this.disableDigitalPins=
function(){for(var a=0;a<u;a++)g.sendDigitalPortReporting(a,e.OFF)};this.enableDigitalPins=function(){for(var a=0;a<u;a++)g.sendDigitalPortReporting(a,e.ON)};this.sendDigitalPortReporting=function(a,b){g.send([208|a,b])};this.enableAnalogPin=function(a){g.send([192|a,e.ON]);g.getAnalogPin(a).setType(e.AIN)};this.disableAnalogPin=function(a){g.send([192|a,e.OFF]);g.getAnalogPin(a).setType(e.AIN)};this.setDigitalPinMode=function(a,b){g.getDigitalPin(a).setType(b);y(g.getDigitalPin(a));g.send([244,a,
b])};this.enablePullUp=function(a){I(a,e.HIGH)};this.getFirmwareVersion=function(){return w};this.sendDigitalPort=function(a,b){g.send([144|a&15,b&127,b>>7])};this.sendString=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(G(a[c])&127),b.push(G(a[c])>>7&127);this.sendSysex(113,b)};this.sendSysex=function(a,b){var d=[];d[0]=c;d[1]=a;for(var e=0,i=b.length;e<i;e++)d.push(b[e]);d.push(f);g.send(d)};this.sendServoAttach=function(a,b,d){var b=b||544,d=d||2400,h=[];h[0]=c;h[1]=112;h[2]=a;h[3]=b%
128;h[4]=b>>7;h[5]=d%128;h[6]=d>>7;h[7]=f;g.send(h);a=g.getDigitalPin(a);a.setType(e.SERVO);y(a)};this.queryPinState=function(a){g.send([c,109,a.number,f])};this.getPin=function(a){return r[a]};this.getAnalogPin=function(a){return r[D[a]]};this.getDigitalPin=function(a){return r[K[a]]};this.getPinCount=function(){return v};this.getI2cPins=function(){return L};this.reportCapabilities=function(){for(var a={"0":"input",1:"output",2:"analog",3:"pwm",4:"servo",5:"shift",6:"i2c"},b=0,c=r.length;b<c;b++)for(var d in r[b].getCapabilities())console.log("pin "+
b+"\tmode: "+a[d]+"\tresolution (# of bits): "+r[b].getCapabilities()[d])};this.send=function(a){o.send(a)};this.close=function(){console.log("socket = "+o);o.close()};this.debug=function(a){console.log(a)};this.addEventListener=function(a,b){z.addEventListener(a,b)};this.removeEventListener=function(a,b){z.removeEventListener(a,b)};this.hasEventListener=function(a){return z.hasEventListener(a)};this.dispatchEvent=function(a,b){return z.dispatchEvent(a,b)}}}();
